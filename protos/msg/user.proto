syntax = "proto3";
package protocol.user;

// ======================================
// 👤 用户相关协议定义文件
// ======================================
// 本文件定义了与用户相关的消息协议，主要用于用户资料更新通知
// 
// 主要包含：
// 1. UserFlushMsg - 用户资料更新推送消息
// ======================================

// =======================================
// 👤 用户资料更新推送消息（UserFlush）
// =======================================
// 用于通知客户端"某个用户资料已被修改"，例如昵称、头像、状态等。
// 常见触发：用户主动修改资料、后台修改资料、服务端同步触发。
// 客户端收到后应刷新本地缓存信息。
message UserFlushMsg {
  string uid = 1;                   // 被更新的用户 ID（资料发生变更的对象）
  string operator_id = 2;           // 操作者 ID（通常为本人，也可能为管理员或系统）

  map<string, string> fields = 3;   // 更新字段列表（键值对）
  // 示例：
  // {
  //   "nickname": "小明",
  //   "avatar": "https://cdn.xxx/avatar.png",
  //   "gender": "male"
  // }

  int64 timestamp = 4;              // 本次更新的时间戳（毫秒）
}
