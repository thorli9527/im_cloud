syntax = "proto3";
package protocol.auth;

// ======================================
// ğŸ” è®¤è¯ç›¸å…³åè®®å®šä¹‰æ–‡ä»¶
// ======================================
// æœ¬æ–‡ä»¶å®šä¹‰äº†ä¸ç”¨æˆ·è®¤è¯ç›¸å…³çš„æ¶ˆæ¯åè®®ï¼ŒåŒ…æ‹¬ç™»å½•ã€éªŒè¯ç ã€åœ¨çº¿çŠ¶æ€ç­‰
// 
// ä¸»è¦åŒ…å«ï¼š
// 1. DeviceType - è®¾å¤‡ç±»å‹æšä¸¾
// 2. AuthReqMsg - è®¤è¯è¯·æ±‚æ¶ˆæ¯
// 3. AuthRepMsg - è®¤è¯å“åº”æ¶ˆæ¯
// 4. SendVerificationCodeReqMsg - å‘é€éªŒè¯ç è¯·æ±‚
// 5. SendVerificationCodeRepMsg - å‘é€éªŒè¯ç å“åº”
// 6. OnlineStatusMsg - ç”¨æˆ·ä¸Šçº¿æ¶ˆæ¯
// 7. OfflineStatueMsg - ç”¨æˆ·ä¸‹çº¿æ¶ˆæ¯
// ======================================

// ================================
// ğŸ“¦ è®¾å¤‡ç±»å‹æšä¸¾
// ================================
// ç”¨äºæ ‡è¯†å®¢æˆ·ç«¯çš„æ¥æºç±»å‹ï¼Œæœ‰åŠ©äºæœåŠ¡ç«¯åŒºåˆ†å¹³å°ç‰¹æ€§ã€é™æµç­–ç•¥ç­‰
enum DeviceType {
  DEVICE_UNKNOWN = 0; // é»˜è®¤æœªçŸ¥è®¾å¤‡ç±»å‹ï¼Œå»ºè®®ä½œä¸ºå…œåº•å¤„ç†
  MOBILE = 1;          // ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œå¦‚ Android / iOS å®¢æˆ·ç«¯
  DESKTOP = 2;         // æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå¦‚ Electronã€åŸç”Ÿæ¡Œé¢ç«¯
  WEB = 3;             // æµè§ˆå™¨ Web å®¢æˆ·ç«¯ï¼ˆH5ï¼‰
  ALL = 100;              // æ™ºèƒ½éŸ³ç®±ã€IoT è®¾å¤‡ç­‰
}
enum AuthType{
  AUTH_TYPE_UNKNOWN = 0;
  AUTH_TYPE_EMAIL = 1;
  AUTH_TYPE_PHONE = 2;
}
// ================================
// ğŸ“¦ ç™»å½•
// ================================
// ç™»å½•è¯·æ±‚
message LoginReqMsg {
  uint64 message_id = 1;        // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
  AuthType auth_type = 2;    // ç™»å½•æ–¹å¼ é‚®ç®±æˆ– ç”µè¯
  string auth_content = 3;   // ç™»å½•å†…å®¹ é‚®ç®±æˆ–/ç”µè¯
  string password = 4;    // å¯†ç ï¼ˆæ˜æ–‡æˆ–åŠ å¯†ï¼‰
  DeviceType device_type = 5; // ç™»å½•è®¾å¤‡ç±»å‹ï¼ˆæšä¸¾ï¼Œå¦‚ iOS/Android/Webï¼‰

}
// ================================
// ğŸ“¦ ç™»å½•è¿”å›
// ================================
// ç™»å½•è¿”å›
message LoginRespMsg {
  uint64 message_id = 1;        // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
  string token = 2; // åˆ·æ–°å‡­è¯
  uint64 expires_at = 3;  // è¿‡æœŸæ—¶é—´
  bool success = 4;       // æ˜¯å¦æˆåŠŸ
  string msg = 5;
  string uid = 6;
  string nickname = 7;
  string avatar = 8;
}

// ========================================
//  é€€å‡ºè¯·æ±‚
message LogoutReqMsg {
  uint64 message_id = 1;        // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
}

// é€€å‡ºè¿”å›
message LogoutRespMsg {
  uint64 message_id = 1;
}

// ========================================
// ğŸ“© å‘é€éªŒè¯ç è¯·æ±‚
// ========================================
// å®¢æˆ·ç«¯è¯·æ±‚å‘é€éªŒè¯ç ï¼ˆçŸ­ä¿¡ã€é‚®ä»¶ç­‰ï¼‰ç”¨äºç™»å½•æˆ–æ³¨å†Œ
message SendVerificationCodeReqMsg {
  uint64 message_id = 1;        // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
  string receiver = 2;          // æ¥æ”¶ç›®æ ‡ï¼ˆæ‰‹æœºå·æˆ–é‚®ç®±ï¼‰ï¼šéªŒè¯ç å‘é€çš„ç›®æ ‡
  string channel = 3;           // æ¸ é“ç±»å‹ï¼ˆå¦‚ sms / email / voiceï¼‰ï¼šéªŒè¯ç å‘é€æ¸ é“
  string scene = 4;             // åœºæ™¯æ ‡è¯†ï¼ˆå¦‚ login / register / reset_pwdï¼‰ï¼šéªŒè¯ç ä½¿ç”¨åœºæ™¯
  string uid = 5;               // å®¢æˆ·ç«¯ ID æˆ–è®¾å¤‡æ ‡è¯†ï¼ˆå¯ç”¨äºé£æ§ï¼‰ï¼šè¯·æ±‚æ–¹æ ‡è¯†
}

// ========================================
// âœ… å‘é€éªŒè¯ç å“åº”
// ========================================
// æœåŠ¡ç«¯å¯¹éªŒè¯ç å‘é€è¯·æ±‚çš„å“åº”
message SendVerificationCodeRepMsg {
  uint64 message_id = 1;        // ä¸è¯·æ±‚ä¸€è‡´çš„ IDï¼šå¯¹åº”è¯·æ±‚çš„æ¶ˆæ¯ID
  bool success = 2;             // æ˜¯å¦å‘é€æˆåŠŸï¼štrueè¡¨ç¤ºéªŒè¯ç å·²å‘é€ï¼Œfalseè¡¨ç¤ºå‘é€å¤±è´¥
  string message = 3;           // é™„åŠ æ¶ˆæ¯ï¼Œå¦‚é”™è¯¯æç¤ºï¼šè¯¦ç»†çš„å“åº”ä¿¡æ¯
  int64 expired_in = 4;         // æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰ï¼šéªŒè¯ç çš„æœ‰æ•ˆæœŸï¼Œå•ä½ç§’
}

// =======================================
// ğŸŸ¢ ç”¨æˆ·ä¸Šçº¿æ¶ˆæ¯ï¼ˆOnlineStatusï¼‰
// =======================================
// è¡¨ç¤ºæŸä¸ªç”¨æˆ·åˆšåˆšä¸Šçº¿ï¼ŒæœåŠ¡ç«¯å¯ç”¨äºå¹¿æ’­é€šçŸ¥ã€‚
message OnlineStatusMsg {
  uint64 message_id = 1;        // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
  string uid = 2;               // ä¸Šçº¿ç”¨æˆ· IDï¼šä¸Šçº¿ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†
  DeviceType device_type = 3;   // ä¸Šçº¿è®¾å¤‡ç±»å‹ï¼ˆå¦‚ mobile/web/pcï¼‰ï¼šç”¨æˆ·ä½¿ç”¨çš„è®¾å¤‡ç±»å‹
  string client_id = 4;         // å®¢æˆ·ç«¯å®ä¾‹ IDï¼ˆå¯ç”¨äºå¤šç«¯åŒºåˆ†ï¼‰ï¼šå®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†
  int64 login_time = 5;         // ä¸Šçº¿æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ï¼šç”¨æˆ·ä¸Šçº¿çš„æ—¶é—´
}

// =======================================
// ğŸ”´ ç”¨æˆ·ä¸‹çº¿æ¶ˆæ¯ï¼ˆOfflineStatusï¼‰
// =======================================
// è¡¨ç¤ºæŸä¸ªç”¨æˆ·ä»æŸè®¾å¤‡ä¸‹çº¿ï¼ŒæœåŠ¡ç«¯å¯ç”¨äºçŠ¶æ€åŒæ­¥æˆ–é€šçŸ¥ã€‚
message OfflineStatueMsg {
  uint64 message_id = 1;        // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
  string uid = 2;               // ä¸‹çº¿ç”¨æˆ· IDï¼šä¸‹çº¿ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†
  DeviceType device_type = 3;   // ä¸‹çº¿è®¾å¤‡ç±»å‹ï¼ˆå¦‚ mobile/web/pcï¼‰ï¼šç”¨æˆ·ä½¿ç”¨çš„è®¾å¤‡ç±»å‹
  string client_id = 4;         // å®¢æˆ·ç«¯å®ä¾‹ IDï¼ˆå¯ç”¨äºå¤šç«¯åŒºåˆ†ï¼‰ï¼šå®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†
  int64 logout_time = 5;        // ä¸‹çº¿æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ï¼šç”¨æˆ·ä¸‹çº¿çš„æ—¶é—´
  string reason = 6;            // å¯é€‰ï¼šä¸‹çº¿åŸå› ï¼Œå¦‚è¶…æ—¶ã€æ‰‹åŠ¨é€€å‡ºã€è¢«è¸¢ç­‰ï¼šä¸‹çº¿åŸå› è¯´æ˜
}