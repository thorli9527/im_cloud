syntax = "proto3";
package protocol.status;
import "common.proto";
// ======================================
// ğŸ“Š çŠ¶æ€ç›¸å…³åè®®å®šä¹‰æ–‡ä»¶
// ======================================
// æœ¬æ–‡ä»¶å®šä¹‰äº†ä¸ç”¨æˆ·çŠ¶æ€ã€æ¶ˆæ¯çŠ¶æ€ç›¸å…³çš„åè®®ï¼Œç”¨äºçŠ¶æ€åŒæ­¥å’Œç¡®è®¤
// 
// ä¸»è¦åŒ…å«ï¼š
// 1. ReadReceiptMsg - æ¶ˆæ¯å·²è¯»å›æ‰§
// 2. TypingNoticeMsg - æ­£åœ¨è¾“å…¥é€šçŸ¥
// 3. HeartbeatMsg - å¿ƒè·³åŒ…
// 4. AckMsg - ACK ç¡®è®¤æ¶ˆæ¯
// ======================================

// =======================================
// âœ… æ¶ˆæ¯å·²è¯»å›æ‰§ï¼ˆRead Receiptï¼‰
// =======================================
// è¡¨ç¤ºæŸæ¡æ¶ˆæ¯å·²è¢«å“ªäº›ç”¨æˆ·é˜…è¯»ï¼Œé€‚ç”¨äºå•èŠæˆ–ç¾¤èŠæ¶ˆæ¯åŒæ­¥åœºæ™¯ã€‚
message ReadReceiptMsg {
  uint64 message_id = 1;     // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
  repeated string reader_ids = 2;     // å·²è¯»è¯¥æ¶ˆæ¯çš„ç”¨æˆ· ID åˆ—è¡¨ï¼ˆå•èŠä¸º1ï¼Œç¾¤èŠå¯å¤šï¼‰
  int64 read_time = 3;                // é¦–æ¬¡è¢«è¯»çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// =======================================
// âœï¸ æ­£åœ¨è¾“å…¥é€šçŸ¥ï¼ˆTyping Noticeï¼‰
// =======================================
// è¡¨ç¤ºæŸä¸ªç”¨æˆ·æ­£åœ¨å¯¹å¦ä¸€ä¸ªç”¨æˆ·/ä¼šè¯è¿›è¡Œè¾“å…¥æ“ä½œï¼Œé€‚ç”¨äº UI "å¯¹æ–¹æ­£åœ¨è¾“å…¥..." æç¤ºã€‚
message TypingNoticeMsg {
  string from_uid = 1;   // æ­£åœ¨è¾“å…¥çš„ç”¨æˆ· IDï¼ˆå‘é€æ–¹ï¼‰
  string to_uid = 2;     // è¾“å…¥ç›®æ ‡ IDï¼ˆå¯¹æ–¹ç”¨æˆ· ID æˆ–ç¾¤ç»„ IDï¼‰
  bool is_typing = 3;     // æ˜¯å¦æ­£åœ¨è¾“å…¥ï¼ˆtrue=å¼€å§‹è¾“å…¥, false=ç»“æŸè¾“å…¥ï¼‰
  int64 timestamp = 4;    // é€šçŸ¥å‘é€çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// =======================================
// â¤ï¸ å¿ƒè·³åŒ…ï¼ˆHeartbeatï¼‰
// =======================================
// ç”¨äºç»´æŒå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é•¿è¿æ¥çŠ¶æ€ï¼Œå®¢æˆ·ç«¯å®šæ—¶å‘é€ã€‚
message HeartbeatMsg {
  // å¿ƒè·³åŒ…é€šå¸¸ä¸éœ€è¦é¢å¤–å­—æ®µï¼Œä»…ç”¨äºä¿æŒè¿æ¥æ´»è·ƒ
}

// =======================================
// ğŸ“¨ ACK ç¡®è®¤æ¶ˆæ¯ï¼ˆAckMessageï¼‰
// =======================================
// ç”¨äºç¡®è®¤æ”¶åˆ°æŸä¸€å°æ¶ˆæ¯ï¼ˆåŒ…æ‹¬èŠå¤©ã€ç³»ç»Ÿç­‰ï¼‰ï¼Œæ”¯æŒé“¾è·¯è¿½è¸ªå’Œå¯é æ€§ä¿è¯ã€‚
message AckMsg {
  uint64 message_id = 1;       // è¢«ç¡®è®¤æ¥æ”¶çš„æ¶ˆæ¯ ID
  common.ByteMessageType ack_type = 2;  // ç¡®è®¤ç±»å‹
  bool success = 3;             // ç¡®è®¤ç»“æœ
  int32 error_code = 5;         // é”™è¯¯ç 
}

// =======================================
// ğŸ”— é‡è¿æ¶ˆæ¯ï¼ˆReConnectMsgï¼‰
// =================
message ReConnectMsg {
  uint64 message_id = 1;       // è¢«ç¡®è®¤æ¥æ”¶çš„æ¶ˆæ¯ ID
  string socket_addr = 2;       // é‡è¿çš„ Socket åœ°å€
}