syntax = "proto3";
import "google/protobuf/descriptor.proto";
package protocol;

// ================================
// ğŸ“¦ è®¾å¤‡ç±»å‹æšä¸¾
// ================================
// ç”¨äºæ ‡è¯†å®¢æˆ·ç«¯çš„æ¥æºç±»å‹ï¼Œæœ‰åŠ©äºæœåŠ¡ç«¯åŒºåˆ†å¹³å°ç‰¹æ€§ã€é™æµç­–ç•¥ç­‰
enum DeviceType {
    DEVICE_UNKNOWN = 0; // é»˜è®¤æœªçŸ¥è®¾å¤‡ç±»å‹ï¼Œå»ºè®®ä½œä¸ºå…œåº•å¤„ç†
    MOBILE = 1;          // ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œå¦‚ Android / iOS å®¢æˆ·ç«¯
    DESKTOP = 2;         // æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå¦‚ Electronã€åŸç”Ÿæ¡Œé¢ç«¯
    WEB = 3;             // æµè§ˆå™¨ Web å®¢æˆ·ç«¯ï¼ˆH5ï¼‰
}

// ================================
// ğŸ” å®¢æˆ·ç«¯å‘èµ·çš„è®¤è¯è¯·æ±‚æ¶ˆæ¯
// ================================
message AuthRequest {
    string message_id = 1;     // å½“å‰æ¶ˆæ¯çš„å”¯ä¸€ IDï¼Œç”¨äºè¿½è¸ªã€ACK ç­‰
    string token = 2;          // å®¢æˆ·ç«¯çš„èº«ä»½å‡­è¯ï¼ˆå¦‚ç™»å½•åè¿”å›çš„ token æˆ– API keyï¼‰
    string uid = 3;      // å®¢æˆ·ç«¯æ ‡è¯†ç¬¦ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†è¿æ¥æºï¼ˆå¯ä¸ºè®¾å¤‡ IDã€UUID ç­‰ï¼‰
    string ip=4;        //è¯·æ±‚ip
    DeviceType device_type = 5; // å®¢æˆ·ç«¯è®¾å¤‡ç±»å‹ï¼Œç”¨äºåŒºåˆ†æ¥æºå¹³å°
}

// ================================
// ğŸ›¡ï¸ æœåŠ¡ç«¯è¿”å›çš„è®¤è¯å“åº”
// ================================
message AuthResponse {
    string message_id = 1;     // å“åº”å¯¹åº”çš„æ¶ˆæ¯ IDï¼ˆä¸è¯·æ±‚ä¸­çš„ä¿æŒä¸€è‡´ï¼‰
    bool success = 2;          // è®¤è¯æ˜¯å¦æˆåŠŸ
    string message = 3;        // é¢å¤–æç¤ºä¿¡æ¯ï¼Œå¦‚é”™è¯¯åŸå› æˆ–æˆåŠŸè¯´æ˜
}


// ========================================
// ğŸ“© å‘é€éªŒè¯ç è¯·æ±‚
// ========================================
message SendVerificationCodeRequest {
    string message_id = 1;        // å”¯ä¸€è¯·æ±‚ IDï¼ˆç”¨äºè¿½è¸ªæˆ–å¹‚ç­‰å¤„ç†ï¼‰
    string receiver = 2;          // æ¥æ”¶ç›®æ ‡ï¼ˆæ‰‹æœºå·æˆ–é‚®ç®±ï¼‰
    string channel = 3;           // æ¸ é“ç±»å‹ï¼ˆå¦‚ sms / email / voiceï¼‰
    string scene = 4;             // åœºæ™¯æ ‡è¯†ï¼ˆå¦‚ login / register / reset_pwdï¼‰
    string uid = 5;         // å®¢æˆ·ç«¯ ID æˆ–è®¾å¤‡æ ‡è¯†ï¼ˆå¯ç”¨äºé£æ§ï¼‰
}

// ========================================
// âœ… å‘é€éªŒè¯ç å“åº”
// ========================================
message SendVerificationCodeResponse {
    string message_id = 1;        // ä¸è¯·æ±‚ä¸€è‡´çš„ ID
    bool success = 2;             // æ˜¯å¦å‘é€æˆåŠŸ
    string message = 3;           // é™„åŠ æ¶ˆæ¯ï¼Œå¦‚é”™è¯¯æç¤º
    int64 expired_in = 4;         // æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
}