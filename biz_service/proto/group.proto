syntax = "proto3";

package protocol;

// ========================================
// ğŸ‘¥ ç¾¤æˆå‘˜å˜æ›´äº‹ä»¶ï¼ˆåŠ äººã€è¸¢äººã€ç¦è¨€ç­‰ï¼‰
// ========================================
message GroupMemberChange {
    string group_id = 1;                   // ç¾¤ç»„ ID
    string operator_id = 2;                // æ“ä½œè€… IDï¼ˆå¦‚ç¾¤ä¸»ã€ç®¡ç†å‘˜ï¼‰
    repeated string affected_users = 3;    // è¢«æ“ä½œçš„ç”¨æˆ· ID åˆ—è¡¨ï¼ˆå¯èƒ½ä¸ºå¤šä¸ªï¼‰
    GroupChangeType change_type = 4;       // æ“ä½œç±»å‹ï¼ˆæšä¸¾å®šä¹‰å¦‚ä¸‹ï¼‰
    int64 timestamp = 5;                   // æ“ä½œæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// ========================================
// ğŸ” ç¾¤æˆå‘˜å˜æ›´ç±»å‹ï¼ˆæ“ä½œç±»å‹æšä¸¾ï¼‰
// ========================================
enum GroupChangeType {
    GROUP_CHANGE_UNKNOWN = 0; // æœªçŸ¥æ“ä½œ

    GROUP_ADD = 1;            // æ·»åŠ æˆå‘˜
    GROUP_REMOVE = 2;         // ç§»é™¤æˆå‘˜
    GROUP_MUTE = 3;           // ç¦è¨€æˆå‘˜
    GROUP_UNMUTE = 4;         // è§£é™¤ç¦è¨€
    GROUP_PROMOTE = 5;        // å‡ä¸ºç®¡ç†å‘˜
    GROUP_DEMOTE = 6;         // é™ä¸ºæ™®é€šæˆå‘˜
    GROUP_INVITE = 7;         // é‚€è¯·åŠ å…¥
    GROUP_LEAVE = 8;          // ä¸»åŠ¨é€€å‡ºç¾¤èŠ
    GROUP_KICK = 9;           // è¸¢å‡ºç¾¤èŠï¼ˆç­‰ä»·äº REMOVEï¼Œå¯ç»†åˆ†ï¼‰
    GROUP_REJOIN = 10;        // é‡æ–°åŠ å…¥ç¾¤èŠ
}


// ========================================
// ğŸ›  ç¾¤å±æ€§å˜æ›´é€šçŸ¥ï¼ˆå•å­—æ®µä¿®æ”¹ï¼‰
// ========================================
message GroupAttributeChange {
    string group_id = 1;               // ç¾¤ç»„ ID
    GroupAttributeKey key = 2;         // è¢«ä¿®æ”¹çš„å­—æ®µé”®åï¼ˆä½¿ç”¨æšä¸¾ï¼Œè§ä¸‹ï¼‰
    string old_value = 3;              // ä¿®æ”¹å‰çš„å€¼
    string new_value = 4;              // ä¿®æ”¹åçš„å€¼
    string operator_id = 5;            // æ“ä½œè€… IDï¼ˆå¦‚ç®¡ç†å‘˜ï¼‰
    int64 timestamp = 6;               // å˜æ›´æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// ========================================
// ğŸ§¾ ç¾¤å­—æ®µæšä¸¾ï¼ˆä»…å…è®¸å¯ä¿®æ”¹å­—æ®µï¼‰
// ========================================
enum GroupAttributeKey {
    ATTRIBUTE_UNKNOWN = 0;      // æœªçŸ¥å­—æ®µï¼ˆå®¹é”™ï¼‰
    NAME = 1;                   // ç¾¤åç§°
    AVATAR = 2;                 // ç¾¤å¤´åƒ URL
    NOTICE = 3;                 // ç¾¤å…¬å‘Šï¼ˆæ–‡æœ¬ï¼‰
    MUTE_ALL = 4;               // å…¨ä½“ç¦è¨€çŠ¶æ€ï¼ˆtrue/falseï¼‰
    INVITE_ONLY = 5;            // æ˜¯å¦ä»…ç¾¤ä¸»/ç®¡ç†å‘˜å¯é‚€è¯·ï¼ˆtrue/falseï¼‰
    HISTORY_VISIBLE = 6;        // å†å²æ¶ˆæ¯æ˜¯å¦å¯è§
    MAX_MEMBER_LIMIT = 7;       // ç¾¤æˆå‘˜ä¸Šé™
    VERIFICATION_TYPE = 8;      // åŠ ç¾¤éªŒè¯æ–¹å¼ï¼ˆå¼€æ”¾/éœ€å®¡æ‰¹/å…³é—­ï¼‰
}

// ========================================
// â• ç¾¤åˆ›å»ºäº‹ä»¶æ¶ˆæ¯ï¼ˆé€šå¸¸ç”±æœåŠ¡ç«¯å¹¿æ’­ï¼‰
// ========================================
message GroupCreateMessage {
    string group_id = 1;                  // æ–°å»ºç¾¤ç»„ ID
    string creator_id = 2;                // åˆ›å»ºè€…ç”¨æˆ· ID
    repeated string member_ids = 3;       // åˆå§‹æˆå‘˜åˆ—è¡¨ï¼ˆåŒ…å«åˆ›å»ºè€…ï¼‰
    string group_name = 4;                // ç¾¤åç§°
    int64 created_at = 5;                 // ç¾¤åˆ›å»ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// ========================================
// âŒ ç¾¤è§£æ•£é€šçŸ¥
// ========================================
message GroupDismissMessage {
    string group_id = 1;          // è¢«è§£æ•£çš„ç¾¤ç»„ ID
    string operator_id = 2;       // è§£æ•£æ“ä½œè€… IDï¼ˆå¦‚ç¾¤ä¸»ã€ç³»ç»Ÿç®¡ç†å‘˜ï¼‰
    int64 dismissed_at = 3;       // è§£æ•£æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// ========================================
// ğŸ‘‘ ç¾¤ä¸»è½¬è®©äº‹ä»¶
// ========================================
message GroupTransferMessage {
    string group_id = 1;          // ç¾¤ç»„ ID
    string old_owner_id = 2;      // åŸç¾¤ä¸» ID
    string new_owner_id = 3;      // æ–°ç¾¤ä¸» ID
    int64 timestamp = 4;          // è½¬è®©æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// ========================================
// ğŸ“£ ç¾¤å…¬å‘Šæ›´æ–°æ¶ˆæ¯
// ========================================
message GroupAnnouncementMessage {
    string group_id = 1;          // ç¾¤ç»„ ID
    string content = 2;           // å…¬å‘Šå†…å®¹ï¼ˆçº¯æ–‡æœ¬ï¼‰
    string operator_id = 3;       // å…¬å‘Šå‘å¸ƒè€… ID
    int64 timestamp = 4;          // å‘å¸ƒæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}
