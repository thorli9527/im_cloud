syntax = "proto3";
package protocol.status;

// =======================================
// âœ… æ¶ˆæ¯å·²è¯»å›æ‰§ï¼ˆRead Receiptï¼‰
// =======================================
// è¡¨ç¤ºæŸæ¡æ¶ˆæ¯å·²è¢«å“ªäº›ç”¨æˆ·é˜…è¯»ï¼Œé€‚ç”¨äºå•èŠæˆ–ç¾¤èŠæ¶ˆæ¯åŒæ­¥åœºæ™¯ã€‚
message ReadReceipt {
  string msg_id = 1;                  // è¢«æ ‡è®°ä¸ºå·²è¯»çš„æ¶ˆæ¯ ID
  repeated string reader_ids = 2;     // å·²è¯»è¯¥æ¶ˆæ¯çš„ç”¨æˆ· ID åˆ—è¡¨ï¼ˆå•èŠä¸º1ï¼Œç¾¤èŠå¯å¤šï¼‰
  int64 read_time = 3;                // é¦–æ¬¡è¢«è¯»çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// =======================================
// âœï¸ æ­£åœ¨è¾“å…¥é€šçŸ¥ï¼ˆTyping Noticeï¼‰
// =======================================
// è¡¨ç¤ºæŸä¸ªç”¨æˆ·æ­£åœ¨å¯¹å¦ä¸€ä¸ªç”¨æˆ·/ä¼šè¯è¿›è¡Œè¾“å…¥æ“ä½œï¼Œé€‚ç”¨äº UI "å¯¹æ–¹æ­£åœ¨è¾“å…¥..." æç¤ºã€‚
message TypingNotice {
  string from_uid = 1;   // æ­£åœ¨è¾“å…¥çš„ç”¨æˆ· IDï¼ˆå‘é€æ–¹ï¼‰
  string to_uid = 2;     // è¾“å…¥ç›®æ ‡ IDï¼ˆå¯¹æ–¹ç”¨æˆ· ID æˆ–ç¾¤ç»„ IDï¼‰
  bool is_typing = 3;     // æ˜¯å¦æ­£åœ¨è¾“å…¥ï¼ˆtrue=å¼€å§‹è¾“å…¥, false=ç»“æŸè¾“å…¥ï¼‰
  int64 timestamp = 4;    // é€šçŸ¥å‘é€çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}

// =======================================
// â¤ï¸ å¿ƒè·³åŒ…ï¼ˆHeartbeatï¼‰
// =======================================
// ç”¨äºç»´æŒå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é•¿è¿æ¥çŠ¶æ€ï¼Œå®¢æˆ·ç«¯å®šæ—¶å‘é€ã€‚
message Heartbeat {
  int64 timestamp = 1;   // å¿ƒè·³å‘é€æ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰
}

// =======================================
// ğŸ“¨ ACK ç¡®è®¤æ¶ˆæ¯ï¼ˆAckMessageï¼‰
// =======================================
// ç”¨äºç¡®è®¤æ”¶åˆ°æŸä¸€å°æ¶ˆæ¯ï¼ˆåŒ…æ‹¬èŠå¤©ã€ç³»ç»Ÿç­‰ï¼‰ï¼Œæ”¯æŒé“¾è·¯è¿½è¸ªå’Œå¯é æ€§ä¿è¯ã€‚
message AckMessage {
  string message_id = 1;     // è¢«ç¡®è®¤æ¥æ”¶çš„æ¶ˆæ¯ ID
  int64 ack_timestamp = 3;   // ç¡®è®¤æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}